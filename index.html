<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lego Metro Simulation with Multiple Lines</title>
  <link rel="stylesheet" href="leaflet.css" />
  <style>
    html, body, #map {
      height: 100%;
      margin: 0;
      padding: 0;
      width: 100%;
    }
  </style>
</head>
<body>
  <div id="map"></div>
  <script src="leaflet.js"></script>
  <script>
    // Create the map using Simple CRS
    const map = L.map('map', {
      crs: L.CRS.Simple,
      minZoom: -1,
      maxZoom: 2,
      zoomControl: true
    });

    // Set image bounds based on 5800x470 (width x height)
    const bounds = [[0, 0], [470, 5800]];
    L.imageOverlay('Lego City County Metro June 2025.png', bounds).addTo(map);
    map.fitBounds(bounds);

    // Define transit lines
    const lines = {
      'A Line (Blue)': {
        color: 'blue',
        coords: [[440,150],[420,750],[380,1500],[340,2600],[300,3700],[280,4800],[260,5700]]
      },
      'B Line (Red)': {
        color: 'red',
        coords: [[430,500],[400,1300],[360,2000],[310,2900],[280,3900],[250,4800],[230,5700]]
      },
      'D Line (Purple)': {
        color: 'purple',
        coords: [[450,1200],[420,1700],[390,2300],[360,3000],[330,3700],[300,4600],[280,5400]]
      },
      'E Line (Yellow)': {
        color: 'yellow',
        coords: [[460,1400],[430,1900],[400,2500],[370,3200],[340,3900],[300,4600]]
      },
      'G Line (Orange)': {
        color: 'orange',
        coords: [[440,1000],[410,1400],[380,1900],[350,2400],[320,2900],[300,3500]]
      },
      'J Line (Silver)': {
        color: 'gray', // silver is not standard; using gray
        coords: [[430,800],[400,1100],[370,1500],[340,2000],[310,2600],[280,3200]]
      },
      'K Line (Pink)': {
        color: 'deeppink',
        coords: [[440,1200],[420,1600],[400,2000],[380,2400],[350,2800],[320,3200]]
      },
      'Sun City Ferry (Green)': {
        color: 'green',
        coords: [[470,0],[460,400],[450,700],[430,1000]]
      }
    };

    // Draw the polylines
    for (const [name, line] of Object.entries(lines)) {
      L.polyline(line.coords, {
        color: line.color,
        weight: 5,
        opacity: 0.9,
        smoothFactor: 1
      }).addTo(map).bindPopup(name);
    }

    // Simulated red train dot
    const train = L.circleMarker([440, 150], {
      radius: 8,
      color: 'red',
      fillColor: '#f03',
      fillOpacity: 1
    }).addTo(map);

    let x = 150;
    let y = 440;
    setInterval(() => {
      x += 10;
      y -= 1;
      if (x > 5700 || y < 10) {
        x = 150;
        y = 440;
      }
      train.setLatLng([y, x]);
    }, 100);
  </script>
</body>
</html>
